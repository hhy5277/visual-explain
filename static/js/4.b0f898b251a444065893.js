webpackJsonp([4],{"5qOL":function(t,e){},DQI8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Zrlr"),r=n.n(i),o=n("wxAW"),a=n.n(o),s=function(){function t(e,n){r()(this,t),this.name=e,this._children=n,this.visible=!1,this.key=1e3*Math.random()}return a()(t,[{key:"addChild",value:function(t){this._children||(this._children=[]),this._children.push(t)}},{key:"filterChildren",value:function(){this._children&&(this.children=this._children.filter(function(t){return t.visible}),this.children&&this.children.forEach(function(t){return t.filterChildren()}))}},{key:"hide",value:function(t){this.name!==t?this._children&&this._children.forEach(function(e){return e.hide(t)}):this.visible=!1}},{key:"show",value:function(t){this.name!==t?this._children&&this._children.forEach(function(e){return e.show(t)}):this.visible=!0}}]),t}(),l=function(){function t(e){r()(this,t),this.rootDomNode=e}return a()(t,[{key:"restore",value:function(){this.rootDomNode.restore()}},{key:"hide",value:function(t){this.rootDomNode.hide(t)}},{key:"show",value:function(t){this.rootDomNode.show(t)}},{key:"getData",value:function(){return!1===this.rootDomNode.visible?null:(this.rootDomNode.filterChildren(),this.rootDomNode)}}]),t}(),c=new s("html",null),d=new s("body",null);c.addChild(d);var u=new s("head",null);c.addChild(u);var h=new s("title",null),p=new s("style",null);u.addChild(h),u.addChild(p);var m=new s("h1",null),v=new s("ul",null);d.addChild(m),d.addChild(v);var f=new s("li",null);v.addChild(f);var y=new l(c),k=function(){function t(e,n,i){r()(this,t),this.contentStr=e,this.stepArray=n,this.domTreeData=i,this.initData()}return a()(t,[{key:"initData",value:function(){this.rows=this.contentStr.split("\n"),this.curStep=-1}},{key:"restore",value:function(){this.curStep=-1,this.hideAll()}},{key:"hideAll",value:function(){var t=this;this.stepArray.forEach(function(e){t.domTreeData.hide(e.nodeName)})}},{key:"stepForward",value:function(){this.curStep>=this.stepArray.length-1||(this.curStep+=1,this.domTreeData.show(this.stepArray[this.curStep].nodeName))}},{key:"stepBackword",value:function(){this.curStep<=-1||(this.curStep-=1,this.domTreeData.hide(this.stepArray[this.curStep+1].nodeName))}},{key:"isLastStep",value:function(){return this.curStep>=this.stepArray.length-1}},{key:"getCurContent",value:function(){this.getCurRows().join("\n")}},{key:"getCurRows",value:function(){for(var t=0,e=0;e<=this.curStep;e++)t+=this.stepArray[e].count;return this.getAllRows().slice(0,t)}},{key:"getCurDomTreeData",value:function(){return this.domTreeData.getData()}},{key:"getAllRows",value:function(){return this.rows}}]),t}(),w=new k("<!DOCTYPE html>\n<html>\n    <head>\n      <title>Web app lifecycle</title>\n      <style>\n          #list { color: green;}\n          #second { color: red;}\n      </style>\n    </head>\n    <body>\n        <h1>head one</h1>\n        <ul id=\"list\"></ul>\n        <script>\n            var liElement = document.createElement(\"li\");\n            liElement.textContent = 'I am a li';\n            document.getElementById('list').appendChild(liElement);\n        <\/script>\n    </body>\n</html>",[{count:2,nodeName:"html"},{count:1,nodeName:"head"},{count:1,nodeName:"title"},{count:4,nodeName:"style"},{count:1,nodeName:""},{count:1,nodeName:"body"},{count:1,nodeName:"h1"},{count:1,nodeName:"ul"},{count:5,nodeName:"li"},{count:2,nodeName:""}],y),x={name:"Root",data:function(){return{yScale:null,codeView:null,domTree:null,codeSnippet:w,nodeRadius:30,nodeWidth:80,nodeHeight:140}},mounted:function(){this.domTree=this.$d3.select("#domTree"),this.codeView=this.$d3.select("#codeView"),this.linkContainer=this.$d3.select("#linkContainer"),this.circleContainer=this.$d3.select("#circleContainer"),this.textContainer=this.$d3.select("#textContainer"),window.code=this},methods:{previousStep:function(){this.codeSnippet.stepBackword(),this.updateView(this.codeSnippet.getCurRows()),this.updateDomTree()},nextStep:function(){this.codeSnippet.stepForward(),this.updateView(this.codeSnippet.getCurRows()),this.updateDomTree()},autoPlay:function(){this.clearDomTree(),this.codeSnippet.restore(),this.autoNextStep()},clearDomTree:function(){this.codeView.selectAll("*").remove(),this.linkContainer.selectAll("*").remove(),this.circleContainer.selectAll("*").remove(),this.textContainer.selectAll("*").remove()},autoNextStep:function(){var t=this;this.codeSnippet.isLastStep()||setTimeout(function(){t.nextStep(),t.autoNextStep()},1e3)},updateView:function(t){var e=this.codeView.selectAll("text").data(t);e.style("stroke","black"),e.enter().append("text").text(function(t){return t}).style("stroke","blue").style("font-family","monospace").style("stroke-width",.5).attr("x",-100).style("opacity",0).attr("xml:space","preserve").transition().attr("font-size","20px").attr("x","30").attr("y",function(t,e){return 30*(e+1)}).style("opacity",1).style("stroke","black").style("stroke-width",.5),e.exit().transition().style("stroke","red").attr("x","-100px").attr("y",0).style("opacity",0).remove()},updateDomTree:function(){if(this.codeSnippet.getCurDomTreeData()){var t=this.$d3.hierarchy(this.codeSnippet.getCurDomTreeData()),e=this.$d3.tree().nodeSize([this.nodeWidth,this.nodeHeight])(t);this.drawDomTree(e.descendants(),e.links())}else this.drawDomTree([],[])},drawDomTree:function(t,e){var n=this.domTree.style("width"),i=parseInt(n.substring(0,n.length-2))/2,r=this.linkContainer.selectAll(".link").data(e),o=this;r.enter().append("path").attr("class","link").attr("fill","transparent").attr("stroke","black").merge(r).attr("d",function(t,e){return o.$d3.linkVertical().x(function(t){return t.x+i}).y(function(t){return t.y+100}).source(function(t){return{x:t.source.x,y:t.source.y}}).target(function(){return{x:t.target.x,y:t.target.y}})(t)}),r.exit().remove();var a=this.circleContainer.selectAll("circle").data(t,function(t){return t.data.key});a.enter().append("circle").attr("class","node").attr("fill","white").attr("stroke","black").attr("r",this.nodeRadius).merge(a).transition().attr("cx",function(t){return t.x+i}).attr("cy",function(t){return t.y+100}),a.exit().remove();var s=this.textContainer.selectAll("text").data(t,function(t){return t.data.key});s.enter().append("text").attr("text-anchor","middle").attr("font-size","20px").attr("dy",".4em").merge(s).transition().attr("x",function(t){return t.x+i}).attr("y",function(t){return t.y+100}).text(function(t){return t.data.name}),s.exit().remove()}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"domRender"}},[n("div",{attrs:{id:"control-panel"}},[n("v-tooltip",{attrs:{bottom:""}},[n("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},on:{click:function(e){t.previousStep()}},slot:"activator"},[n("v-icon",[t._v("navigate_before")])],1),t._v(" "),n("span",[t._v("Step Backward")])],1),t._v(" "),n("v-tooltip",{attrs:{bottom:""}},[n("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},on:{click:function(e){t.nextStep()}},slot:"activator"},[n("v-icon",[t._v("navigate_next")])],1),t._v(" "),n("span",[t._v("Step Forward")])],1),t._v(" "),n("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.autoPlay()}}},[t._v("Auto play")])],1),t._v(" "),n("div",{attrs:{id:"svg-container"}},[n("svg",{attrs:{id:"codeView"}}),t._v(" "),n("svg",{attrs:{id:"domTree"}},[n("g",{attrs:{id:"linkContainer"}}),t._v(" "),n("g",{attrs:{id:"circleContainer"}}),t._v(" "),n("g",{attrs:{id:"textContainer"}})])])])},staticRenderFns:[]};var S=n("VU/8")(x,C,!1,function(t){n("5qOL")},null,null);e.default=S.exports}});
//# sourceMappingURL=4.b0f898b251a444065893.js.map